<!--!
  @file signup.html
  @brief Plantilla de registro de usuario (Signup) de la app cuentas.
  @details
   - Extiende de `base.html`.
   - Usa Django Allauth para el flujo de creación de cuenta.
   - Incluye validación de contraseñas y manejo de errores.
   - Integra estilos `login.css` y lógica de UX desde `login.js`.
-->

{% extends 'base.html' %}
{% load static i18n widget_tweaks %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/login.css' %}">
<br>

<div class="login-container">
  <!--! @brief Título y descripción del formulario de registro -->
  <h2 class="login-title">{% trans "Crear cuenta" %}</h2>
  <p class="login-subtitle">{% trans "Únete para empezar a publicar y guardar propiedades." %}</p>

  <!--! @brief Errores generales que no pertenecen a un campo específico -->
  {% if form.non_field_errors %}
    <ul class="errorlist">
      {% for e in form.non_field_errors %}<li>{{ e }}</li>{% endfor %}
    </ul>
  {% endif %}

  <!--! @brief Formulario de registro (Allauth: account_signup) -->
  <form method="post" action="{% url 'account_signup' %}" class="login-form" id="signupForm">
    {% csrf_token %}

    <!--! @brief Campo de correo electrónico -->
    <div class="form-group">
      {{ form.email|add_class:"input-field" }}
      <label for="{{ form.email.id_for_label }}">{% trans "Correo electrónico" %}</label>
      {% if form.email.errors %}
        <ul class="errorlist">{% for e in form.email.errors %}<li>{{ e }}</li>{% endfor %}</ul>
      {% endif %}
    </div>

    <!--! @brief Campo de contraseña -->
    <div class="form-group">
      {{ form.password1|add_class:"input-field" }}
      <label for="{{ form.password1.id_for_label }}">{% trans "Contraseña" %}</label>
      {% if form.password1.errors %}
        <ul class="errorlist">{% for e in form.password1.errors %}<li>{{ e }}</li>{% endfor %}</ul>
      {% endif %}
    </div>

    <!--! @brief Campo de confirmación de contraseña -->
    <div class="form-group">
      {{ form.password2|add_class:"input-field" }}
      <label for="{{ form.password2.id_for_label }}">{% trans "Confirmar contraseña" %}</label>
      {% if form.password2.errors %}
        <ul class="errorlist">{% for e in form.password2.errors %}<li>{{ e }}</li>{% endfor %}</ul>
      {% endif %}
    </div>

    <!--! @brief Botón para enviar el formulario de registro -->
    <button type="submit" class="btn-principal btn-full" data-loading-text="{% trans 'Creando…' %}">
      {% trans "Registrarse" %}
    </button>
  </form>

  <!--! @brief Separador entre opciones de registro -->
  <div class="hr-text">{% trans "o" %}</div>

  <!--! @brief Botón secundario que redirige al login -->
  <a href="{% url 'account_login' %}" class="btn-secundario btn-full">
    {% trans "¿Ya tienes cuenta? Inicia sesión" %}
  </a>
</div>

<!--! @brief Script de interacción para mejorar la UX en el registro -->
<script src="{% static 'js/login.js' %}"></script>
<br>
{% endblock %}
